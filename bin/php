#!/bin/bash +x

set -eu

. get_tty
. submodules/lib/docker_host_user_id.sh

# We actually need word-splitting for the TTY flag to work
# shellcheck disable=SC2086
docker run \
    -e "LOCAL_USER_ID=$DOCKER_HOST_USER_ID" \
    -i \
    $TTY \
    --rm \
    -v "$(pwd)":/workdir \
    -v ~/.composer:/home/user/.composer \
	  chekote/php:7.3.29-phpunit7 php "$@"
