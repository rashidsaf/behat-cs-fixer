#!/bin/bash +x

set -eu

. get_tty
. submodules/lib/docker_host_user_id.sh

# We actually need word-splitting for the TTY flag to work
# shellcheck disable=SC2086
docker run \
    -e "LOCAL_USER_ID=$DOCKER_HOST_USER_ID" \
    -i \
    $TTY \
    --rm \
    --mount source=gherkin_cs_fixer_project,target=/workdir \
    --mount source=user_composer,target=/home/user/.composer \
	chekote/php:7.3.33-phpunit7 php "$@"
